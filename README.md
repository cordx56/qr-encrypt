# qr-encrypt

このアプリケーションは、Rust製のWASMを利用し、ユーザがフロントエンドのコードのみで簡単に公開鍵暗号を利用できるシステムです。

[デモページはこちら](https://qrenc.cordx.cx)

## 使い方

次のように使います。

### 共通

初めてアクセスする際には、自分の鍵が自動で生成されます。
少し時間がかかるので、待ってください。

### 暗号化メッセージを受け取る側

事前に送信者に公開鍵を渡します。
QRコードを用いても、コピーしたテキストを用いても構いません。

### 暗号化メッセージを送る側

1. 事前に受信者の公開鍵を受け取っておき、わかりやすい名前をつけて保存します。
2. 「Send Message」ボタンを押して、受信者の公開鍵を用いて暗号化します。
3. 表示されたQRコードか、テキストをコピーしてメッセージを送ります。

## セキュリティ

このシステムはHTML、CSS、JavaScript、WebAssemblyを用いて作られています。
サーバ上には一切データが保存されないため、生成した秘密鍵が外部に漏れる心配が少ないです。

## 仕様

- ユーザが初めてルートページにアクセスすると、秘密鍵を生成し、localStorageに秘密鍵と公開鍵を格納する。
- その後、ここにユーザの公開鍵のQRコードが表示される。
- ユーザはルートページの「読み取り」ボタンから相手の公開鍵のQRコード、もしくは暗号化されたメッセージのQRコードを読み取ることができる。
- 読み取ったQRコードが公開鍵なら、名前をつけるダイアログを表示し、localStorageに保存する。
- 暗号化されたメッセージを読み取った場合、自動で復号してダイアログに表示する。

### localStorageの保存形式

localStorageには、それぞれのキーに対して次のように保存する。

- キー: mySecretKey
  - 秘密鍵を保存する
- キー: myPublicKey
  - 公開鍵を保存する
- キー: keys
  - 名前をキーに、値を公開鍵としてJSONを保存する。
